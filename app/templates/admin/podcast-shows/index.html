{% extends "admin/base.html" %}

{% set page_title = "Podcast Shows" %}
{% set active_nav = "podcast-shows" %}

{% block admin_content %}
<header class="admin-main__header">
  <h1 class="admin-main__title">Podcast Shows</h1>
  <p class="admin-main__subtitle">Manage podcast RSS feeds</p>
</header>

<div class="admin-card">
  <div class="admin-card__header">
    <h2 class="admin-card__title">All Shows</h2>
    <a href="/admin/podcast-shows/new" class="admin-btn admin-btn--primary admin-btn--small">
      Add Show
    </a>
  </div>

  {% if shows %}
  <table class="admin-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Draft Focused</th>
        <th>Status</th>
        <th>Interval</th>
        <th>Last Fetched</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for show in shows %}
      <tr>
        <td>
          <strong>{{ show.name }}</strong>
          {% if show.name != show.display_name %}
          <br><span class="admin-text--small">{{ show.display_name }}</span>
          {% endif %}
        </td>
        <td>
          {% if show.is_draft_focused %}
          <span class="admin-badge admin-badge--active">Yes</span>
          {% else %}
          <span class="admin-badge admin-badge--inactive">No</span>
          {% endif %}
        </td>
        <td>
          {% if show.is_active %}
          <span class="admin-badge admin-badge--active">Active</span>
          {% else %}
          <span class="admin-badge admin-badge--inactive">Inactive</span>
          {% endif %}
        </td>
        <td>{{ show.fetch_interval_minutes }} min</td>
        <td>
          {% if show.last_fetched_at %}
          {{ show.last_fetched_at.strftime('%Y-%m-%d %H:%M') }}
          {% else %}
          <span class="admin-text--placeholder">Never</span>
          {% endif %}
        </td>
        <td>
          <div class="admin-table__actions">
            <a href="/admin/podcast-shows/{{ show.id }}" class="admin-btn admin-btn--secondary admin-btn--small">Edit</a>
            <form method="post" action="/admin/podcast-shows/{{ show.id }}/delete" class="admin-form--inline" onsubmit="return confirm('Are you sure you want to delete this podcast show?');">
              <button type="submit" class="admin-btn admin-btn--danger admin-btn--small">Delete</button>
            </form>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="admin-empty">
    <div class="admin-empty__icon">&#127911;</div>
    <h3 class="admin-empty__title">No Podcast Shows</h3>
    <p class="admin-empty__text">Get started by adding your first podcast show.</p>
    <a href="/admin/podcast-shows/new" class="admin-btn admin-btn--primary">Add Show</a>
  </div>
  {% endif %}
</div>
{% endblock %}
